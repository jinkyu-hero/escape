<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>함수 마법서 탈출 게임</title>
    <link rel="stylesheet" href="style.css">
    
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script>
        MathJax = {
          tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']] 
          }
        };
    </script>
</head>
<body>
    <div class="container">
        <h1>🗝️ 함수 마법서 탈출</h1>
        <p class="description">마법서에 봉인된 당신! 네 개의 함수 관문을 통과하고 최종 좌표를 찾아 탈출하세요. **힌트는 이전 문제의 정답입니다.**</p>

        <div id="game-area">
            <div class="puzzle-box active" id="puzzle-1">
                <h2>[관문 1] 합성함수의 금고 (3자리 비밀번호)</h2>
                <div class="problem">
                    <p>함수 $\$f(x) = 2x - 3\$$, $\$g(x) = x^2 + 1\$$, $\$h(x) = 5 - x\$$ 가 있습니다.</p>
                    <p>A: $\$f(4)\$$의 값</p>
                    <p>B: $\$(g \circ f)(3)\$$의 값</p>
                    <p>C: $\$|(f \circ h)(5)|\$$의 값 (절댓값)</p>
                    <p>금고 비밀번호는 A, B, C를 순서대로 나열한 3자리 숫자입니다.</p>
                </div>
                <input type="text" id="answer-1" placeholder="3자리 숫자 입력 (예: 123)">
                <button onclick="checkAnswer(1)">힌트 확인</button>
                <p id="feedback-1" class="feedback"></p>
                <p id="hint-1" class="concept-hint hidden">💡 **개념 힌트:** 합성함수 $\$(g \circ f)(x)\$$는 $\$$g(f(x))\$$임을 기억하고, **안쪽 함수 $\$$f(x)\$$**부터 먼저 계산하는 것을 잊지 마세요.</p>
            </div>

            <div class="puzzle-box" id="puzzle-2">
                <h2>[관문 2] 역함수의 열쇠 (유리함수 k 값)</h2>
                <div class="problem">
                    <p>함수 $\$f(x) = \frac{1}{2}x + 4\$$ 가 주어졌습니다.</p>
                    <p>$\$$f^{-1}(7)\$$의 값을 구하시오. 이 값이 다음 유리함수의 $\mathbf{k}$ 값입니다.</p>
                </div>
                <input type="text" id="answer-2" placeholder="숫자 입력">
                <button onclick="checkAnswer(2)">힌트 확인</button>
                <p id="feedback-2" class="feedback"></p>
                <p id="hint-2" class="concept-hint hidden">💡 **개념 힌트:** $\$$f^{-1}(b)=a\$$는 $\$$f(a)=b\$$와 같습니다. 결과 값 $7$이 나오도록 하는 **원래 함수 $\$$f(x)\$$의 입력 값**을 찾아보세요.</p>
            </div>

            <div class="puzzle-box" id="puzzle-3">
                <h2>[관문 3] 유리함수의 키워드</h2>
                <div class="problem">
                    <p>이전 관문에서 얻은 $\mathbf{k}$ 값을 이용하여, 함수 $\$y = \frac{3x + k}{x - 2}\$$ 가 지나는 **사분면의 개수**를 구하시오.</p>
                    <p>정답이 **3**이면 'START', **4**이면 'ESCAPE' 입니다. (정답은 숫자만 입력)</p>
                </div>
                <input type="text" id="answer-3" placeholder="숫자 입력 (3 또는 4)">
                <button onclick="checkAnswer(3)">힌트 확인</button>
                <p id="feedback-3" class="feedback"></p>
